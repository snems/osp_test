# Система шрифтов

Система шрифтов сделана на основе [baseq3a](https://github.com/ec-/baseq3a).
Основное отличие таких шрифтов - автоматический выбор разрешения и поддержка пропорциональных (не моноширинных) шрифтов.

В дополнение к классическому q3 графическому файлу шрифта используется файл конфигурации.
Файлы конфигурации лежат в каталоге `gfx/2d` и имеют расширение cfg.

Формат файла:

```
// img <font image> <threshold>, up to 4 entries allowed
img "gfx/2d/bigchars_64.tga" 48
img "gfx/2d/bigchars_32.tga" 22
img "gfx/2d/bigchars_16.tga" 0
// fnt <width> <height> <char width> <char height>
fnt 1024 1024 64 64
// <ch> <x0> <y0> <x1> <w> <s1> <s2>
0 0 0 24 16 6 6
1 64 0 4 56 4 4
2 128 0 4 56 4 4
```

## `img <font image> <threshold>`

Здесь задается файл шрифта и минимальная высота когда он может быть использован. Для каждого конкретного размера шрифта будет выбран максимально файл с максимально возможным расширением.

## `fnt <width> <height> <char width> <char height>`

Разрешение всего графического файла в пикселях и размер поля одного символа.

## `<ch> <x0> <y0> <x1> <w> <s1> <s2>`

- `ch` - номер символа.
- `<x0> <y0>`  - координаты поля символа в файле. 
- `<x1> <w>` - смещение до начала символа и его ширина внутри поля символа (для пропорциональной печати).
- `<s1> <s2>` - сколько пустых пикселей оставлять слева и справа при печати (для пропорциональной печати).

## Генератор шрифтов

Для создания конфигурационного файла можно использовать скрипт `util/q3font.py`. Этот скрипт требует ситуативных доработок и не дает окончательного результата, однако существенно облегчает создание новых шрифтов.
